<div class="section">
  <div style="font-weight:700; text-align:center; margin-bottom:8px;">Weekly Overview</div>
  <div class="date-nav">
    <div class="date-picker">
      <a href="?week_start={{ prev_week_start|date:'Y-m-d' }}" class="date-btn js-week-nav" data-week-start="{{ prev_week_start|date:'Y-m-d' }}" title="Previous week" aria-label="Previous week" role="button">←</a>
      <div class="date-label">{{ week_label }}</div>
      <a href="?week_start={{ next_week_start|date:'Y-m-d' }}" class="date-btn js-week-nav" data-week-start="{{ next_week_start|date:'Y-m-d' }}" title="Next week" aria-label="Next week" role="button">→</a>
    </div>
  </div>
  <div class="weekly-grid-cols" style="display:grid; gap:8px; align-items:center; font-weight:600; margin-bottom:6px;">
    <div>Day</div><div>Type</div><div style="text-align:center; justify-self:center;">Score</div><div>Target</div>
  </div>
  {% for r in recent_rows %}
    <div class="weekly-grid-cols" style="display:grid; gap:8px; align-items:center; padding:6px 0; border-top: 1px solid rgba(0,0,0,0.06);">
      <div>{{ r.day_label }}</div>
      <div>{{ r.type }}</div>
    <div style="display:flex; justify-content:center; align-items:center; justify-self:center;">
      <div class="small-circle clickable" data-score="{{ r.score|default:0 }}" data-date="{{ r.date_str }}" style="width:46px;height:46px;" tabindex="0" role="button" aria-label="View metrics for {{ r.date_str }}">
          <svg viewBox="0 0 100 100">
            <circle class="bg" cx="50" cy="50" r="40"></circle>
            <circle class="fg {% if r.status == 'above' %}above{% elif r.status == 'in' %}in{% elif r.status == 'below' %}below{% else %}below{% endif %}" cx="50" cy="50" r="40" stroke-dasharray="0 251.3" stroke-dashoffset="0"></circle>
          </svg>
          <div class="score" style="font-size:16px;"><span style="display:block;">{{ r.score|default:'—' }}</span></div>
        </div>
      </div>
      <div>
        <span class="chip" style="display:inline-block; font-weight:700; font-size:14px; white-space:nowrap;">{{ r.range_min }}–{{ r.range_max }}%</span>
      </div>
    </div>
  {% endfor %}
</div>

